<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="teddyCloud is an open source replacement server for the tonies cloud."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="teddyCloud"><meta property="og:description" content="teddyCloud is an open source replacement server for the tonies cloud."><meta property="og:type" content="website"><meta property="og:url" content="https://tonies-wiki.revvox.de/docs/tools/teddycloud/"><title>teddyCloud | Toniebox Hacking</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.e2994ec3dc0cc7d1d85b138ad4e4c3f02d8abfa8b8471dfe0ab15a7a8a77d6ee.css integrity="sha256-4plOw9wMx9HYWxOK1OTD8C2Kv6i4Rx3+CrFaeop31u4=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.81b746f48160c420e7d05049ec7759397795d665c84b54c9b28f85f176644d6b.js integrity="sha256-gbdG9IFgxCDn0FBJ7HdZOXeV1mXIS1TJso+F8XZkTWs=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://tonies-wiki.revvox.de/docs/tools/teddycloud/index.xml title="Toniebox Hacking"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Toniebox Hacking</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></label><ul></ul></li></ul><ul><li><a href=/docs/how-to-get-started/>How to get started?</a><ul></ul></li><li><a href=/docs/faq/>Frequently Asked Questions</a><ul></ul></li><li><a href=/docs/tools/>Tools</a><ul><li><a href=/docs/tools/teddybench/>teddyBench</a><ul></ul></li><li><input type=checkbox id=section-a95e960a612f8fbab37aea668df2b6d5 class=toggle checked>
<label for=section-a95e960a612f8fbab37aea668df2b6d5 class="flex justify-between"><a href=/docs/tools/teddycloud/ class=active>teddyCloud</a></label><ul><li><input type=checkbox id=section-08589f4fa7088ff9815adcc05e7aacc4 class=toggle>
<label for=section-08589f4fa7088ff9815adcc05e7aacc4 class="flex justify-between"><a href=/docs/tools/teddycloud/dump-certs/>Dump certificates</a></label><ul><li><a href=/docs/tools/teddycloud/dump-certs/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/dump-certs/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/dump-certs/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-f141aff7b6c9b4dfa1b48a14e77b8d99 class=toggle>
<label for=section-f141aff7b6c9b4dfa1b48a14e77b8d99 class="flex justify-between"><a href=/docs/tools/teddycloud/flash-ca/>Flash replacement CA</a></label><ul><li><a href=/docs/tools/teddycloud/flash-ca/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/flash-ca/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/flash-ca/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-19ec87583f488bf9fe81a32d62ca8659 class=toggle>
<label for=section-19ec87583f488bf9fe81a32d62ca8659 class="flex justify-between"><a href=/docs/tools/teddycloud/dns/>DNS</a></label><ul><li><a href=/docs/tools/teddycloud/dns/cc3200/>CC3200</a></li><li><a href=/docs/tools/teddycloud/dns/cc3235/>CC3235</a></li><li><a href=/docs/tools/teddycloud/dns/esp32/>ESP32</a></li></ul></li><li><input type=checkbox id=section-8a0e6c9408da4789feca011468edd839 class=toggle>
<label for=section-8a0e6c9408da4789feca011468edd839 class="flex justify-between"><a href=/docs/tools/teddycloud/content-json/>content-json config</a></label></li><li><input type=checkbox id=section-777ee17ab29162f7ffb97fb14771f7d4 class=toggle>
<label for=section-777ee17ab29162f7ffb97fb14771f7d4 class="flex justify-between"><a href=/docs/tools/teddycloud/error-codes/>Error codes</a></label></li><li><input type=checkbox id=section-071aab74659f3d0eaae299a65f96a793 class=toggle>
<label for=section-071aab74659f3d0eaae299a65f96a793 class="flex justify-between"><a href=/docs/tools/teddycloud/playlist-tap-json/>Playlists (TAP)</a></label></li><li><input type=checkbox id=section-7832741801da3a1ec4da0543f9ab58c2 class=toggle>
<label for=section-7832741801da3a1ec4da0543f9ab58c2 class="flex justify-between"><a href=/docs/tools/teddycloud/supported-server-hardware/>Supported NAS/Server hardware</a></label></li><li><input type=checkbox id=section-9f0001a565c93857a56ba24a115b4214 class=toggle>
<label for=section-9f0001a565c93857a56ba24a115b4214 class="flex justify-between"><a href=/docs/tools/teddycloud/test-troubleshooting/>Test & Troubleshooting</a></label></li><li><input type=checkbox id=section-3a6e711678369096da829622bfac2609 class=toggle>
<label for=section-3a6e711678369096da829622bfac2609 class="flex justify-between"><a href=/docs/tools/teddycloud/toniesboxes-custom-json/>tonieboxes-custom-json</a></label></li><li><input type=checkbox id=section-d361fff082c26a25af12525966467244 class=toggle>
<label for=section-d361fff082c26a25af12525966467244 class="flex justify-between"><a href=/docs/tools/teddycloud/tonies-custom-json/>tonies-custom-json config</a></label></li></ul></li></ul></li><li><a href=/docs/box-variants/>Box Variants</a><ul><li><a href=/docs/box-variants/cc3200/>CC3200</a></li><li><a href=/docs/box-variants/cc3235/>CC3235</a></li><li><a href=/docs/box-variants/esp32/>ESP32</a></li></ul></li><li><a href=/docs/custom-firmware/>Custom Firmware</a><ul><li><input type=checkbox id=section-42e43c8e420eed49ce3d0915aa7a0f11 class=toggle>
<label for=section-42e43c8e420eed49ce3d0915aa7a0f11 class="flex justify-between"><a href=/docs/custom-firmware/cc3200/>CC3200</a></label><ul><li><input type=checkbox id=section-fb4cb61a40d81e2312fca285b90fac32 class=toggle>
<label for=section-fb4cb61a40d81e2312fca285b90fac32 class="flex justify-between"><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/>HackieboxNG Bootloader</a></label><ul><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/install/>Installation</a></li><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/bootloader/>Bootloader</a></li><li><a href=/docs/custom-firmware/cc3200/hackieboxng-bl/ofw-patches/>Firmware patches</a></li></ul></li><li><input type=checkbox id=section-e6b6fb6492df9b2143f091c829117a9d class=toggle>
<label for=section-e6b6fb6492df9b2143f091c829117a9d class="flex justify-between"><a href=/docs/custom-firmware/cc3200/hackiebox-cfw/>Hackiebox CFW PoC</a></label><ul><li><a href=/docs/custom-firmware/cc3200/hackiebox-cfw/api/>Hackiebox API</a></li></ul></li></ul></li><li><input type=checkbox id=section-96fc9f3b17ed6977851c210f7d13b6ef class=toggle>
<label for=section-96fc9f3b17ed6977851c210f7d13b6ef class="flex justify-between"><a href=/docs/custom-firmware/esp32/>ESP32</a></label><ul><li><a href=/docs/custom-firmware/esp32/teddybox/>TeddyBox CFW</a><ul></ul></li></ul></li></ul></li><li><a href=/docs/wiki/>Wiki</a><ul><li><input type=checkbox id=section-d8f00f9faa706cfd8232ca710ec83905 class=toggle>
<label for=section-d8f00f9faa706cfd8232ca710ec83905 class="flex justify-between"><a role=button>CC3200</a></label><ul><li><a href=/docs/wiki/cc3200/boot-process/>Boot Process</a></li><li><a href=/docs/wiki/cc3200/debug-port/>Debug port</a></li><li><a href=/docs/wiki/cc3200/firmware-layout/>Firmware layout</a></li><li><a href=/docs/wiki/cc3200/firmware-list/>Firmware list</a></li><li><a href=/docs/wiki/cc3200/hardware/>Hardware</a></li><li><a href=/docs/wiki/cc3200/microsd-compatibility/>microSD compatibility</a></li><li><a href=/docs/wiki/cc3200/pinout/>Pinout</a></li></ul></li><li><input type=checkbox id=section-67f43499674643a099dd84c6cb56579b class=toggle>
<label for=section-67f43499674643a099dd84c6cb56579b class="flex justify-between"><a role=button>ESP32</a></label><ul><li><a href=/docs/wiki/esp32/pinout/>Pinout</a></li></ul></li><li><input type=checkbox id=section-682231c8b0ba39c29d77ab65a2a7a682 class=toggle>
<label for=section-682231c8b0ba39c29d77ab65a2a7a682 class="flex justify-between"><a role=button>General</a></label><ul><li><a href=/docs/wiki/general/glossary/>Glossary</a></li><li><a href=/docs/wiki/general/audio-file-format/>Audio file format</a></li><li><a href=/docs/wiki/general/battery-power-supply/>Battery & Power supply</a></li><li><a href=/docs/wiki/general/internal-audio-files/>Internal audio files</a></li><li><a href=/docs/wiki/general/known-problems/>Known problems</a></li><li><a href=/docs/wiki/general/protocol-analysis/>Protocol analysis</a></li><li><a href=/docs/wiki/general/replacement-parts/>Replacement parts</a></li><li><a href=/docs/wiki/general/traffic-sniffing/>Traffic sniffing</a></li><li><a href=/docs/wiki/general/useful-links/>Useful links</a></li></ul></li></ul></li></ul><ul><li><a href target=_blank rel=noopener>More</a><ul><li><a href=https://github.com/toniebox-reverse-engineering target=_blank rel=noopener>GitHub</a></li><li><a href=https://t.me/toniebox_reverse_engineering target=_blank rel=noopener>Telegram Chat</a></li><li><a href=https://forum.revvox.de/ target=_blank rel=noopener>Discourse Forum</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>teddyCloud</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#features>Features</a></li><li><a href=#docker-hints>Docker hints</a></li><li><a href=#preparation>Preparation</a></li><li><a href=#device-specific-preparation>Device specific preparation</a></li><li><a href=#test--troubleshooting>Test & Troubleshooting</a></li><li><a href=#additional>Additional</a><ul><li><a href=#content>Content</a></li><li><a href=#webinterface>Webinterface</a></li></ul></li><li><a href=#links>Links</a></li></ul></nav></aside></header><article class=markdown><h1 id=teddycloud>teddyCloud
<a class=anchor href=#teddycloud>#</a></h1><h2 id=features>Features
<a class=anchor href=#features>#</a></h2><p>teddyCloud is an alternative server for your Toniebox, allowing you to host the cloud services locally.
This gives you the control about which data is sent to the original manufacturer&rsquo;s cloud and allows you
to host your own figurine audio files on e.g. your <a href=supported-server-hardware.md>NAS or any other server</a>.
You can also use teddyCloud on the command line to manipulate esp32 firmware dumps or encode Tonie Audio Files (TAFs). See <code>toniecloud --help</code>.</p><h2 id=docker-hints>Docker hints
<a class=anchor href=#docker-hints>#</a></h2><p>The docker container automatically generates the server certificates on first run. You can extract the <code>certs/server/ca.der</code> for your box after that.</p><p>An example <a href=https://github.com/toniebox-reverse-engineering/teddycloud/blob/master/docker/docker-compose.yaml>docker-compose.yaml can be found within the docker subdir.</a>
Please beware that port 443 cannot be remapped and you cannot use a reverse proxy like nginx or traefik. The client certificate authentication needs to be done by teddyCloud. Also, there is no SNI. If you are using docker, you can use macvlan to give the teddyCloud container a dedicated IP address.</p><h2 id=preparation>Preparation
<a class=anchor href=#preparation>#</a></h2><p>Please connect your Toniebox to your Wi-Fi and update its firmware. Many boxes are shipped with a production firmware that needs to be updated. Otherwise the box won&rsquo;t work as it should. It is not necessary to connect the box to the mytonies app/account. <a href=https://support.tonies.com/hc/en-us/articles/4415294030482-How-do-I-set-up-a-Wi-Fi-connection-without-the-setup-assistant>Connect the box without the setup assistant.</a></p><h2 id=device-specific-preparation>Device specific preparation
<a class=anchor href=#device-specific-preparation>#</a></h2><p>Please check wether you got a Toniebox with a CC3200, CC3235 or ESP32 and continue with the following steps:</p><ul><li><a href=dump-certs>Dump CA and client certificates</a></li><li><a href=flash-ca>Flash the replacement CA</a></li><li><a href=dns>DNS</a></li></ul><h2 id=test--troubleshooting>Test & Troubleshooting
<a class=anchor href=#test--troubleshooting>#</a></h2><p>If you have problems with teddyCloud or just want to be sure everything works as it should, please check our <a href=test-troubleshooting>Test & Troubleshooting site</a>.</p><h2 id=additional>Additional
<a class=anchor href=#additional>#</a></h2><h3 id=content>Content
<a class=anchor href=#content>#</a></h3><p>Please put your content into the <code>/data/content/default/</code> in the same structure as on your toniebox. You can edit <code>500304E0.json</code> file beside the content files to mark them as live or you can prevent the usage of the Boxine cloud for that tag with the nocloud parameter. By setting a source teddyCloud can stream any content that ffmpeg can decode (urls and files). Please check that the file and folders in upper case. If not rename them, otherwise teddyCloud won&rsquo;t serve them to the box!</p><h3 id=webinterface>Webinterface
<a class=anchor href=#webinterface>#</a></h3><p>Currently the teddyCloud webinterface is reachable through the IP of the docker container at port 80 or 443 (depending on your <code>docker-compose.yaml</code>). Changes affecting the toniebox (volume, LED) which are made through this interface will only be reflected onto the toniebox after pressing the big ear for a few seconds until a beep occurs.</p><p><img src=/img/teddyCloudWebinterface.png alt="teddyCloud Webinterface"></p><p>As an additional frontend is still being developed, you can reach a second frontend at <code>xxx.xxx.xxx/web</code>. Changes made here are instantly live on the box.</p><h2 id=links>Links
<a class=anchor href=#links>#</a></h2><ul><li><a href=https://github.com/toniebox-reverse-engineering/teddycloud>GitHub</a></li><li><a href=https://github.com/toniebox-reverse-engineering/teddycloud/releases>Releases</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/toniebox-reverse-engineering/toniebox-reverse-engineering.github.io/commit/c600471691acc3948777cf7c583eb941e48619ca title='Last modified by henryk86 | 2024-04-18' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>2024-04-18</span></a></div><div><a class="flex align-center" href=https://github.com/toniebox-reverse-engineering/toniebox-reverse-engineering.github.io/edit/master/content/docs/tools/teddyCloud/_index.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#features>Features</a></li><li><a href=#docker-hints>Docker hints</a></li><li><a href=#preparation>Preparation</a></li><li><a href=#device-specific-preparation>Device specific preparation</a></li><li><a href=#test--troubleshooting>Test & Troubleshooting</a></li><li><a href=#additional>Additional</a><ul><li><a href=#content>Content</a></li><li><a href=#webinterface>Webinterface</a></li></ul></li><li><a href=#links>Links</a></li></ul></nav></div></aside></main></body></html>